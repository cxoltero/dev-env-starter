{"version":3,"sources":["webpack:///main.726cf026fca6b8f7e568.js","webpack:///./src/index.js","webpack:///./src/api/userApi.js","webpack:///./src/api/baseUrl.js"],"names":["webpackJsonp","module","exports","__webpack_require__","global","populateTable","users","tableBody","map","user","id","firstName","lastName","email","addDelMethodToItem","itemsArray","Array","from","link","onclick","e","preventDefault","element","target","_userApi","deleteUser","attributes","value","row","parentNode","removeChild","getUsers","then","res","isArray","deleteLinks","document","getElementsByClassName","getElementById","innerHTML","call","this","_interopRequireDefault","obj","__esModule","default","get","del","url","baseUrl","fetch","onSuccess","onError","json","err","console","log","req","Request","method","mode","Object","defineProperty","_baseUrl","_baseUrl2","getBaseUrl","getQueryStringParameterByName","name","window","location","href","replace","regex","RegExp","results","exec","decodeURIComponent"],"mappings":"AAAAA,cAAc,IAER,SAASC,EAAQC,EAASC,IAEH,SAASC,GAAS,YCS/C,SAASC,GAAcC,GACrB,GAAIC,GAAY,EAchB,OAZAD,GAAME,IAAI,SAAAC,GACRF,yDAEiCE,EAAKC,GAFtC,uDAGYD,EAAKC,GAHjB,wBAIYD,EAAKE,UAJjB,wBAKYF,EAAKG,SALjB,wBAMYH,EAAKI,MANjB,iCAWKN,EAGT,QAASO,GAAmBC,GAC1BC,MAAMC,KAAKF,EAAY,SAAAG,GACrBA,EAAKC,QAAU,SAASC,GACtBA,EAAEC,gBACF,IAAMC,GAAUF,EAAEG,QAClB,EAAAC,EAAAC,YAAWH,EAAQI,WAAW,WAAWC,MACzC,IAAMC,GAAMN,EAAQO,WAAWA,UAC/BD,GAAIC,WAAWC,YAAYF,MAtCjCzB,EAAA,EACA,IAAAqB,GAAArB,EAAA,IAEA,EAAAqB,EAAAO,YACGC,KAAK,SAAAC,GACJ,GAAIA,GAAOjB,MAAMkB,QAAQD,GAAM,CAC7B,GAAM3B,GAAQ2B,EACRE,EAAc/B,EAAOgC,SAASC,uBAAuB,aAC3DjC,GAAOgC,SAASE,eAAe,SAASC,UAAYlC,EAAcC,GAClEQ,EAAmBqB,QD+BKK,KAAKtC,EAAU,WAAa,MAAOuC,WAI3D,SAASxC,EAAQC,KAKhB,CAED,SAASD,EAAQC,EAASC,GAE/B,YAcA,SAASuC,GAAuBC,GAAO,MAAOA,IAAOA,EAAIC,WAAaD,GAAQE,UAASF,GE5DjF,QAASZ,KACd,MAAOe,GAAI,UAGN,QAASrB,GAAWf,GACzB,MAAOqC,aAAcrC,GAGvB,QAASoC,GAAIE,GAEX,MADAA,GAAMC,EAAUD,EACTE,MAAMF,GAAKhB,KAAKmB,EAAWC,GAGpC,QAASD,GAAUlB,GACjB,MAAOA,GAAIoB,OAGb,QAASD,GAAQE,GACfC,QAAQC,IAAIF,GAGd,QAASP,GAAIC,GACXA,EAAMC,EAAUD,CAChB,IAAMS,GAAM,GAAIC,SAAQV,GACtBW,OAAQ,SACRC,KAAM,QAGR,OAAOV,OAAMO,GAAKzB,KAAKmB,EAAWC,GFoBnCS,OAAOC,eAAe5D,EAAS,cAC7ByB,OAAO,IAETzB,EEnDe6B,WFoDf7B,EEhDeuB,aAThBtB,EAAA,EACA,IAAA4D,GAAA5D,EAAA,GF8DK6D,EAAYtB,EAAuBqB,GE5DlCd,GAAU,EAAAe,iBFoGT,CAED,SAAS/D,EAAQC,GAEtB,YG7Gc,SAAS+D,KACtB,MAAOC,GAA8B,cAAgB,wBAA0B,wCAGjF,QAASA,GAA8BC,EAAMnB,GAC3CO,QAAQC,IAAIY,OAAOC,SAASC,MACxBtB,IAAKA,EAAMoB,OAAOC,SAASC,MAC/BH,EAAOA,EAAKI,QAAQ,UAAW,OAC/B,IAAIC,GAAQ,GAAIC,QAAO,OAASN,EAAO,qBACnCO,EAAUF,EAAMG,KAAK3B,EACzB,OAAI0B,GACAA,EAAQ,GACLE,mBAAmBF,EAAQ,GAAGH,QAAQ,MAAO,MAD7B,GADH,KHqGrBV,OAAOC,eAAe5D,EAAS,cAC7ByB,OAAO,IAETzB,aGlHuB+D","file":"main.726cf026fca6b8f7e568.js","sourcesContent":["webpackJsonp([0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {'use strict';\n\t\n\t__webpack_require__(1);\n\t\n\tvar _userApi = __webpack_require__(3);\n\t\n\t(0, _userApi.getUsers)().then(function (res) {\n\t  if (res && Array.isArray(res)) {\n\t    var users = res;\n\t    var deleteLinks = global.document.getElementsByClassName('deleteUser');\n\t    global.document.getElementById('users').innerHTML = populateTable(users);\n\t    addDelMethodToItem(deleteLinks);\n\t  }\n\t});\n\t\n\tfunction populateTable(users) {\n\t  var tableBody = '';\n\t\n\t  users.map(function (user) {\n\t    tableBody += '\\n        <tr>\\n          <td><a href=\"#\" data-id=\"' + user.id + '\" class=\"deleteUser\">Delete</a></td>\\n          <td>' + user.id + '</td>\\n          <td>' + user.firstName + '</td>\\n          <td>' + user.lastName + '</td>\\n          <td>' + user.email + '</td>\\n        </tr>\\n      ';\n\t  });\n\t\n\t  return tableBody;\n\t}\n\t\n\tfunction addDelMethodToItem(itemsArray) {\n\t  Array.from(itemsArray, function (link) {\n\t    link.onclick = function (e) {\n\t      e.preventDefault();\n\t      var element = e.target;\n\t      (0, _userApi.deleteUser)(element.attributes[\"data-id\"].value);\n\t      var row = element.parentNode.parentNode;\n\t      row.parentNode.removeChild(row);\n\t    };\n\t  });\n\t}\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 2 */,\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.getUsers = getUsers;\n\texports.deleteUser = deleteUser;\n\t\n\t__webpack_require__(4);\n\t\n\tvar _baseUrl = __webpack_require__(5);\n\t\n\tvar _baseUrl2 = _interopRequireDefault(_baseUrl);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t// use fetch for http calls\n\t// TODO, for some reason port 8081 does not work on chrome, it works fine on firefox.\n\tvar baseUrl = (0, _baseUrl2.default)();\n\t\n\tfunction getUsers() {\n\t  return get('/users');\n\t}\n\t\n\tfunction deleteUser(id) {\n\t  return del('/users/' + id);\n\t}\n\t\n\tfunction get(url) {\n\t  url = baseUrl + url;\n\t  return fetch(url).then(onSuccess, onError);\n\t}\n\t\n\tfunction onSuccess(res) {\n\t  return res.json();\n\t}\n\t\n\tfunction onError(err) {\n\t  console.log(err); // eslint-disable-line no-console\n\t}\n\t\n\tfunction del(url) {\n\t  url = baseUrl + url;\n\t  var req = new Request(url, {\n\t    method: \"DELETE\",\n\t    mode: \"cors\"\n\t  });\n\t\n\t  return fetch(req).then(onSuccess, onError);\n\t}\n\n/***/ },\n/* 4 */,\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = getBaseUrl;\n\tfunction getBaseUrl() {\n\t  return getQueryStringParameterByName('useMockAPI') ? 'http://localhost:8081' : 'https://calm-wave-83171.herokuapp.com';\n\t}\n\t\n\tfunction getQueryStringParameterByName(name, url) {\n\t  console.log(window.location.href);\n\t  if (!url) url = window.location.href;\n\t  name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n\t  var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n\t      results = regex.exec(url);\n\t  if (!results) return null;\n\t  if (!results[2]) return '';\n\t  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n\t}\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** main.726cf026fca6b8f7e568.js\n **/","import './index.css';\nimport {getUsers, deleteUser} from './api/userApi';\n\ngetUsers()\n  .then(res => {\n    if (res && Array.isArray(res)) {\n      const users = res;\n      const deleteLinks = global.document.getElementsByClassName('deleteUser');\n      global.document.getElementById('users').innerHTML = populateTable(users);\n      addDelMethodToItem(deleteLinks);\n    }\n  });\n\nfunction populateTable(users){\n  let tableBody = '';\n\n  users.map(user => {\n    tableBody += `\n        <tr>\n          <td><a href=\"#\" data-id=\"${user.id}\" class=\"deleteUser\">Delete</a></td>\n          <td>${user.id}</td>\n          <td>${user.firstName}</td>\n          <td>${user.lastName}</td>\n          <td>${user.email}</td>\n        </tr>\n      `\n  });\n\n  return tableBody;\n}\n\nfunction addDelMethodToItem(itemsArray) {\n  Array.from(itemsArray, link => {\n    link.onclick = function(e) {\n      e.preventDefault();\n      const element = e.target;\n      deleteUser(element.attributes[\"data-id\"].value);\n      const row = element.parentNode.parentNode;\n      row.parentNode.removeChild(row);\n    }\n  });\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","// use fetch for http calls\n// TODO, for some reason port 8081 does not work on chrome, it works fine on firefox.\nimport 'whatwg-fetch';\nimport getBaseUrl from './baseUrl';\n\nconst baseUrl = getBaseUrl();\n\nexport function getUsers() {\n  return get('/users');\n}\n\nexport function deleteUser(id) {\n  return del(`/users/${id}`);\n}\n\nfunction get(url) {\n  url = baseUrl + url ;\n  return fetch(url).then(onSuccess, onError);\n}\n\nfunction onSuccess(res) {\n  return res.json();\n}\n\nfunction onError(err) {\n  console.log(err); // eslint-disable-line no-console\n}\n\nfunction del(url) {\n  url = baseUrl + url ;\n  const req = new Request(url, {\n    method: \"DELETE\",\n    mode: \"cors\"\n  });\n\n  return fetch(req).then(onSuccess, onError);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/api/userApi.js\n **/","export default function getBaseUrl(){\n  return getQueryStringParameterByName('useMockAPI') ? 'http://localhost:8081' : 'https://calm-wave-83171.herokuapp.com';\n}\n\nfunction getQueryStringParameterByName(name, url) {\n  console.log(window.location.href);\n  if(!url) url = window.location.href;\n  name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n  var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n      results = regex.exec(url);\n  if(!results) return null;\n  if(!results[2]) return '';\n  return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/api/baseUrl.js\n **/"],"sourceRoot":""}